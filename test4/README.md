# 实验4:图书管理系统顺序图绘制

|学号|班级|姓名|
|----|------|----|
|201610414112|软件（本）16-1|唐银浩|

## 图书管理系统的顺序图
<br>

## 1.反馈信息用例
### 1.1反馈信息PlantUML源码
```puml
@startuml
actor 学生
database 反馈信息表
actor 图书管理员

activate 学生
学生 -> 反馈信息表:填写反馈表
反馈信息表 ->图书管理员:发送反馈表
反馈信息表 ->学生:反馈成功
deactivate 学生
@enduml
```

### 1.2反馈信息顺序图

![img](./picture/returnInfo.png)

### 1.3反馈信息顺序图说明
学生填写反馈信息表存到数据库，系统返回反馈成功。数据库后台将反馈信息发给图书管理员。

<br>

## 2.预定图书用例
### 2.1预定图书PlantUML源码
```puml
@startuml
actor 学生
activate 学生
学生 ->学生信息:验证登录
activate 学生信息
学生信息 ->学生:验证成功
deactivate 学生信息
学生->图书信息:获取图书信息
activate 图书信息
图书信息 ->学生:返回图书信息
学生->预定图书信息:预定图书
activate 预定图书信息
预定图书信息->图书信息:图书剩余量是否可预定
loop 等待预定
    图书信息->预定图书信息:剩余量不足,并等待预定
    预定图书信息->学生:等待预定
end
图书信息->预定图书信息:剩余量可预定
deactivate 图书信息
预定图书信息->学生:预定成功
deactivate 预定图书信息
deactivate 学生
@enduml
```
### 2.2预定图书顺序图

![img](./picture/orderBook.png)

### 2.3预定图书顺序图说明
学生登录系统后查询图书信息，然后选择图书进行预定，
系统将查询图书剩余量是否可预定，如果剩余量不足将进行预定等待。
<br>
直到系统查询到剩余量满足可预定，系统才将图书信息存到预定图书信息表，然后反馈预定成功。

<br>

## 3.取消预定用例
### 3.1取消预定PlantUML源码
```puml
@startuml
actor 学生
activate 学生
学生->学生信息:验证登录
activate 学生信息
学生信息->学生:允许登录
deactivate 学生信息
学生->预定图书信息:查询预定信息
activate 预定图书信息
预定图书信息->学生:返回学生预定信息
学生->预定图书信息:选择取消的预定
预定图书信息->图书信息:增加图书剩余量
activate 图书信息
图书信息->预定图书信息:修改成功
deactivate 图书信息
预定图书信息->学生:取消成功
deactivate 预定图书信息
deactivate 学生
@enduml
```
### 3.2取消预定顺序图

![img](./picture/cancelOrder.png)

### 3.3取消预定顺序图说明
学生登录系统后查询预定的图书信息，选择需要预定的图书信息发给系统，系统将自动
增加图书剩余量，并告知学生取消成功。

<br>

## 4.查询借阅情况用例
### 4.1查询借阅情况PlantUML源码
```puml
@startuml
actor 学生
activate 学生
学生->学生信息:登录
activate 学生信息
学生信息->学生:允许登录
deactivate 学生信息
学生->借阅信息:查询借阅信息
activate 借阅信息
借阅信息->学生:返回借阅信息
deactivate 借阅信息
deactivate 学生
@enduml
```
### 4.2查询借阅情况顺序图

![img](./picture/readingInfo.png)

### 4.3查询借阅情况顺序图说明
学生登录系统后向系统发出查询借阅信息的申请，系统从数据库中返回借阅信息。

<br>

## 5.查询书目用例
### 5.1查询书目PlantUML源码
```puml
@startuml
actor 学生
activate 学生
学生->书目信息:查询书目
activate 书目信息
书目信息->学生:返回数据
deactivate 书目信息
deactivate 学生
@enduml
```
### 5.2查询书目顺序图

![img](./picture/selectBookInfo.png)

### 5.3查询书目顺序图说明
学生选择查询方式，然后输入查询内容，系统给读者返回书目信息。

<br>

## 6.维护书目用例
### 6.1维护书目PlantUML源码
```puml
@startuml
actor 图书管理员
activate 图书管理员
图书管理员->管理员信息:登录
activate 管理员信息
管理员信息->图书管理员:允许登录
deactivate 管理员信息
activate 图书信息
opt 修改图书信息
    图书管理员->图书信息:获取图书信息
    图书信息->图书管理员:返回图书信息
    图书管理员->图书信息:修改图书信息
    图书信息->图书管理员:修改成功
end
opt 增加图书
    图书管理员->图书信息:添加图书信息
    图书信息->图书管理员:添加成功
end
deactivate 图书信息
deactivate 图书管理员
@enduml
```
### 6.2维护书目顺序图

![img](./picture/maintianBookInfo.png)

### 6.3维护书目顺序图说明
管理员登录系统后选择需要进行的功能，然后根据功能进行不同的操作。

<br>

## 7.借出书目用例
### 7.1借出书目PlantUML源码
```puml
@startuml
actor 图书管理员
activate 图书管理员
图书管理员->管理员信息:登录
activate 管理员信息
管理员信息->图书管理员:登录成功
deactivate 管理员信息
图书管理员 ->学生信息:验证学生
activate 学生信息
学生信息->图书管理员:验证成功
deactivate 学生信息
图书管理员->预定信息:查询学生预定信息
activate 预定信息
预定信息->图书管理员:返回学生的预定信息
deactivate 预定信息
图书管理员->借阅记录:确认借阅
activate 借阅记录
借阅记录->预定信息:修改预定信息
activate 预定信息
预定信息->借阅记录:修改成功
deactivate 预定信息
借阅记录->图书信息:确认减少可借数量
activate 图书信息
图书信息->借阅记录:确认成功
deactivate 图书信息
借阅记录->学生信息:减少可借阅数量
activate 学生信息
学生信息->借阅记录:修改成功
deactivate 学生信息
借阅记录->图书管理员:借阅成功
deactivate 借阅记录
deactivate 图书管理员
@enduml
```
### 7.2借出书目顺序图

![img](./picture/borrowBook.png)

### 7.3借出书目顺序图说明
管理员登录系统后首先验证学生信息，然后查阅学生的预定信息，如果学生有预定信息则确认借阅。
<br>
确认借阅后，系统将修改预定信息为已借阅，同时创建借阅记录表，然后将确认减少图书的馆藏量
（图书显示已预定的人数和剩余可借阅量,如果可借阅数大于已预定的人数则不能预约此书，同时预订人
需要在两日内借阅图书，否则将清除预定信息），并更改当前学生的可借阅书目数量，自动记录借阅日期
和计算最后归还期限日期，最后返回借阅结果。

<br>

## 8.归还图书用例
### 8.1归还图书PlantUML源码
```puml
@startuml
actor 图书管理员
activate 图书管理员
图书管理员->管理员信息:登录
activate 管理员信息
管理员信息->图书管理员:登陆成功
deactivate 管理员信息
图书管理员->学生信息:验证学生信息
activate 学生信息
学生信息->图书管理员:验证成功
deactivate 学生信息
图书管理员->借阅记录:查询借阅信息
activate 借阅记录
借阅记录->图书管理员:返回查询结果
deactivate 借阅记录
图书管理员->借阅记录:归还图书
activate 借阅记录
借阅记录->图书信息:图书剩余量增加
activate 图书信息
图书信息->借阅记录:修改成功
deactivate 图书信息
借阅记录->学生信息:增加学生可借阅量
activate 学生信息
学生信息->借阅记录:修改成功
deactivate 学生信息
opt 逾期
    借阅记录->逾期记录:记录逾期记录
    activate 逾期记录
    逾期记录->借阅记录:记录成功
    deactivate 逾期记录
end
借阅记录->图书管理员:归还成功
deactivate 借阅记录
deactivate 图书管理员
@enduml
```
### 8.2归还图书顺序图

![img](./picture/returnBook.png)

### 8.3归还图书顺序图说明
管理员在登陆后验证学生信息，验证成功后便查询学生的借阅信息，然后确认归还图书。
<br>
系统首先增加该图书的剩余量，然后增加学生的可借阅量。如果系统发现学生归还日期发生了逾期，
还将记录逾期记录，然后返回给管理员，最后归还图书成功。

<br>

## 9.维护学生信息用例
### 9.1维护学生信息PlantUML源码
```puml
@startuml
actor 图书管理员
activate 图书管理员
图书管理员->管理员信息:登录
activate 管理员信息
管理员信息->图书管理员:允许登录
deactivate 管理员信息
activate 学生信息
opt 修改学生信息
    图书管理员->学生信息:获取学生信息
    学生信息->图书管理员:返回学生信息
    图书管理员->学生信息:修改学生信息
    学生信息->图书管理员:修改成功
end
opt 增加学生
    图书管理员->学生信息:添加学生信息
    学生信息->图书管理员:添加成功
end
deactivate 学生信息
deactivate 图书管理员
@enduml
```
### 9.2维护学生信息顺序图

![img](./picture/maintianReaderInfo.png)

### 9.3维护学生信息顺序图说明
管理员登录系统后选择需要进行的功能，然后根据功能进行不同的操作。